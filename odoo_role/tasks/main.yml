---
- name: Deploy Odoo with Docker Compose
  hosts: all
  vars:
    network_name: "{{ network_name | default('icgroup-network') }}"
    volume_name: "{{ volume_name | default('odoo_data') }}"
    volume_path: "{{ volume_path | default('/opt/odoo_data') }}"
    odoo_container_name: "{{ odoo_container_name | default('odoo-app') }}"
    postgres_container_name: "{{ postgres_container_name | default('odoo-db') }}"
    
  tasks:
    - name: Create directory for volume
      file:
        path: "{{ volume_path }}"
        state: directory
        mode: '0755'
        
    - name: Deploy Odoo stack
      docker_compose:
        project_src: "{{ playbook_dir }}"
        files:
          - docker-compose-odoo.yml
